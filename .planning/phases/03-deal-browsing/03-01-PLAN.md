---
phase: 03-deal-browsing
plan: 01
type: execute
---

<objective>
Create the DealCard component with anonymous display following glassmorphic design system.

Purpose: Establish the core deal presentation that makes pricing visible while hiding business details until user verification.
Output: DealCard and DealCardSkeleton components in components/features/ layer.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@CLAUDE.md

**Prior Phase Summaries:**
@.planning/phases/01-foundation/01-02-SUMMARY.md
@.planning/phases/01-foundation/01-03-SUMMARY.md

**"Anonymous Until Committed" principle (from PROJECT.md):**
- Consumers see: treatment title, pricing, location area, rating, discount percent
- Hidden until verified account: business name, address, phone, specific location
- Visual indicator that business details are locked (blur/lock icon)

**Design system from Phase 1-02:**
- Card component: `<Card variant="glass" padding="none" hover>` for interactive cards
- Badge component: `<Badge variant="brand" size="sm">` for discount badges
- Glassmorphic styling: bg-glass-bg, backdrop-blur-lg, border-glass-border
- Brand orange: text-brand-primary, bg-brand-primary

**Mock data types from Phase 1-03:**
- AnonymousDeal: has locationArea, businessRating, businessReviewCount, businessTier
- TreatmentCategory: 'botox' | 'fillers' | 'facials' | 'laser' | 'body' | 'skincare'
- Query utilities: getActiveDeals(), getDealsByCategory(), etc.

**Component architecture:**
- DealCard goes in components/features/ (has domain logic for anonymous display)
- Uses Card, Badge from components/ui/
- Phosphor icons: Lock, Star, MapPin, Tag
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DealCard component</name>
  <files>src/components/features/dealCard.tsx</files>
  <action>
Create src/components/features/dealCard.tsx with the anonymous deal display.

Key implementation details:
1. 'use client' for onClick interactivity
2. Import Card from @/components/ui/card and Badge from @/components/ui/badge
3. Import Phosphor icons: Star, MapPin, Lock, Tag from @phosphor-icons/react
4. Import AnonymousDeal, TreatmentCategory from @/types

Props interface:
- deal: AnonymousDeal
- onClick?: () => void
- variant?: 'grid' | 'list' (default 'grid')

Card structure:
- Use Card with variant="glass" padding="none" hover
- Image section: aspect-[4/3] for grid, w-48 shrink-0 for list
  - If no imageUrl, show Tag icon placeholder in bg-bg-tertiary
  - Category badge (variant="default") top-left
  - Discount badge (variant="brand") top-right showing "{discountPercent}% OFF"
  - Sponsored indicator bottom-left if deal.isSponsored
- Content section (p-4):
  - Title: font-semibold text-text-primary, line-clamp-2
  - Description: only in list variant, text-sm text-text-secondary line-clamp-2
  - Pricing: deal price in text-xl font-bold text-brand-primary, original price struck through
  - Unit info: text-xs text-text-tertiary
  - Location & Rating row: MapPin + locationArea, Star (amber-400) + rating
  - "Business Hidden" section: Lock icon + "Business details hidden" text, border-t border-glass-border
  - Verified badge for paid tier: Badge variant="brand"

Category labels mapping: botox→'Botox', fillers→'Fillers', etc.
  </action>
  <verify>Component imports correctly: `import { DealCard } from '@/components/features/dealCard'`, TypeScript compiles with `npm run build`</verify>
  <done>DealCard component displaying anonymous deal with pricing visible, business hidden, glassmorphic styling</done>
</task>

<task type="auto">
  <name>Task 2: Create DealCardSkeleton component</name>
  <files>src/components/features/dealCardSkeleton.tsx</files>
  <action>
Create src/components/features/dealCardSkeleton.tsx for loading states.

Props interface:
- variant?: 'grid' | 'list' (default 'grid')

Structure (matching DealCard dimensions):
- Use Card with variant="glass" padding="none"
- Image skeleton: same dimensions as DealCard, bg-bg-tertiary animate-pulse
- Content skeleton:
  - Title placeholder: h-5 bg-bg-tertiary rounded animate-pulse w-3/4
  - Description placeholders (list only): two lines h-3
  - Price placeholders: h-6 w-16 and h-4 w-12
  - Location/rating placeholders: h-4 w-24 and h-4 w-16
  - Business hidden placeholder: h-4 w-32 border-t border-glass-border pt-2

Use animate-pulse for all placeholder elements.
  </action>
  <verify>Skeleton renders with matching dimensions to DealCard, animation visible</verify>
  <done>DealCardSkeleton matching DealCard layout with loading animation</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] DealCard renders with all AnonymousDeal fields
- [ ] Grid and list variants display correctly
- [ ] Discount badge shows correct percentage
- [ ] Lock icon and "Business details hidden" text visible
- [ ] Verified badge shows for paid tier businesses
- [ ] DealCardSkeleton matches DealCard dimensions
- [ ] `npm run build` succeeds
- [ ] `npm run lint` passes
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- DealCard supports grid and list variants
- Anonymous display hides business details appropriately
- Glassmorphic styling consistent with design system (Card, Badge components)
- Skeleton provides smooth loading experience
</success_criteria>

<output>
After completion, create `.planning/phases/03-deal-browsing/03-01-SUMMARY.md`
</output>
